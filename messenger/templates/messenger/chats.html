{% extends "layout.html" %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'messenger/css/chats.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

{% endblock %}

{% block content %}
<div class="container">
    <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
    <div id="chats-list" class="chats-list">
        <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ JavaScript -->
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤...</p>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
    <div class="messages-container">
        <!-- –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div id="messages-list" class="messages-list">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <div id="message-form">
            <form id="send-message-form">
                <div class="input-group">
                    <textarea id="text" name="text" rows="1" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
                    <div class="input-group-append">
                        <span id="attach-btn">
                            <i class="fas fa-paperclip"></i>
                        </span>
                        <input type="file" id="picture" name="picture" accept="image/*" style="display: none;">
                        <button type="submit">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        
        

        <!-- –§–æ—Ä–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="edit-message-form" style="display: none;">
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h2>
            <form id="edit-message-form-content">
                <div>
                    <label for="edit-text">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:</label>
                    <textarea id="edit-text" name="text" rows="3"></textarea>
                </div>
                <div>
                    <label for="edit-picture">–ù–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞:</label>
                    <input type="file" id="edit-picture" name="picture" accept="image/*">
                </div>
                <div>
                    <label>
                        <input type="checkbox" id="remove-picture" name="remove_picture">
                        –£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
                    </label>
                </div>
                <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button type="button" id="cancel-edit">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
<div id="context-menu" class="context-menu" style="display: none;">
    <button id="edit-message-btn" class="context-menu-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    <button id="delete-message-btn" class="context-menu-btn">–£–¥–∞–ª–∏—Ç—å</button>
    <div class="reactions-context-menu">
        <button class="reaction-btn" data-reaction="üëç">üëç</button>
        <button class="reaction-btn" data-reaction="üëé">üëé</button>
        <button class="reaction-btn" data-reaction="‚ù§Ô∏è">‚ù§Ô∏è</button>
        <button class="reaction-btn" data-reaction="üòä">üòä</button>
    </div>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript -->
<script>
    const userId = {{ request.user.id }};  // –ü–µ—Ä–µ–¥–∞–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Django
    // –ü–µ—Ä–µ–¥–∞–µ–º username –∏–∑ Django –≤ JavaScript
    const username = "{{ username }}";
</script>
<script src="{% static 'messenger/js/chats.js' %}"></script>
{% endblock %}