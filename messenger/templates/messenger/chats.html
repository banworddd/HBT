{% extends "layout.html" %}
{% load static %}

{% block content %}
<div class="container">
    <!-- Список чатов -->
    <div id="chats-list" class="chats-list">
        <!-- Сюда будет вставлен список чатов через JavaScript -->
        <p>Загрузка чатов...</p>
    </div>

    <!-- Список сообщений -->
    <div id="messages-list" class="messages-list">
        <!-- Сюда будет вставлен список сообщений через JavaScript -->
    </div>

    <!-- Форма для отправки нового сообщения -->
    <div id="message-form" style="display: none;">
        <h2>Новое сообщение</h2>
        <form id="send-message-form">
            <div>
                <label for="text">Текст сообщения:</label>
                <textarea id="text" name="text" rows="3"></textarea>
            </div>
            <div>
                <label for="picture">Картинка:</label>
                <input type="file" id="picture" name="picture" accept="image/*">
            </div>
            <button type="submit">Отправить</button>
        </form>
    </div>

    <!-- Форма для редактирования сообщения -->
    <div id="edit-message-form" style="display: none;">
        <h2>Редактировать сообщение</h2>
        <form id="edit-message-form-content">
            <div>
                <label for="edit-text">Текст сообщения:</label>
                <textarea id="edit-text" name="text" rows="3"></textarea>
            </div>
            <div>
                <label for="edit-picture">Новая картинка:</label>
                <input type="file" id="edit-picture" name="picture" accept="image/*">
            </div>
            <div>
                <label>
                    <input type="checkbox" id="remove-picture" name="remove_picture">
                    Удалить текущую картинку
                </label>
            </div>
            <button type="submit">Сохранить изменения</button>
            <button type="button" id="cancel-edit">Отмена</button>
        </form>
    </div>
</div>

<!-- Подключаем JavaScript -->
<script>
    const userId = {{ request.user.id }};  // Передаем ID пользователя из Django
    // Передаем username из Django в JavaScript
    const username = "{{ username }}";
</script>
<script src="{% static 'messenger/js/chats.js' %}"></script>
{% endblock %}