<!-- templates/myapp/messages.html -->
{% extends 'layout.html' %}

{% block title %}Chat Messages{% endblock %}

{% block content %}
    <div class="chat-container">
        <h2>Chat Messages with {{ other_user }}</h2>
        {% for message in messages %}
            <table width="100%">
                <tr>
                    {% if message.author == request.user %}
                        <td align="right" width="70%">
                            <div style="background-color: #dcf8c6; padding: 10px; border-radius: 10px;">
                                <p>{{ message.text }}</p>
                                <p style="font-size: 0.8em; color: #999;">{{ message.send_time|date:"d M Y, H:i" }}</p>
                                <p style="font-size: 0.8em; color: #999;">{{ message.status }}</p>
                            </div>
                        </td>
                        <td width="30%"></td>
                    {% else %}
                        <td width="30%"></td>
                        <td align="left" width="70%">
                            <div style="background-color: #ffffff; padding: 10px; border-radius: 10px;">
                                <p>{{ message.text }}</p>
                                <p style="font-size: 0.8em; color: #999;">{{ message.send_time|date:"d M Y, H:i" }}</p>
                            </div>
                        </td>
                    {% endif %}
                </tr>
            </table>
        {% empty %}
            <p>No messages in this chat.</p>
        {% endfor %}
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Отправить</button>
        </form>
    </div>
{% endblock %}
